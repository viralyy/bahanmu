<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Player</title>

<style>
:root{
  --bg:#05070f;
  --panel:#0b1224;
  --muted:#9fb0c0;
  --accent:#4f8cff;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:linear-gradient(180deg,#020617,#071129);
  color:#eaf4ff;
  font-family:system-ui,Arial;
}
.wrapper{
  max-width:900px;
  margin:auto;
  padding:14px;
}
.card{
  background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(0,0,0,.1));
  border-radius:14px;
  overflow:hidden;
  box-shadow:0 20px 50px rgba(0,0,0,.6);
}
.video-wrap{
  position:relative;
  background:#000;
}
video{
  width:100%;
  max-height:75vh;
  display:block;
}
.play-overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.35);
}
.play-btn{
  background:rgba(0,0,0,.6);
  border:1px solid rgba(255,255,255,.15);
  border-radius:999px;
  padding:14px 22px;
  cursor:pointer;
}
.controls{
  display:flex;
  gap:10px;
  align-items:center;
  padding:12px;
}
.btn{
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.08);
  color:#fff;
  padding:8px 12px;
  border-radius:10px;
  cursor:pointer;
}
.btn.primary{
  background:linear-gradient(90deg,var(--accent),#2aa0ff);
  border:none;
}
.range{flex:1}
.meta{
  padding:12px;
}
.title{font-size:20px;font-weight:800}
.sub{font-size:13px;color:var(--muted);margin-top:4px}
.stats{
  display:flex;
  gap:16px;
  font-size:13px;
  margin-top:8px;
  color:var(--muted);
}
.dot{
  width:8px;height:8px;
  border-radius:50%;
  background:#00ff6a;
  box-shadow:0 0 8px #00ff6a;
  display:inline-block;
  margin-right:6px;
}
.full{
  padding:12px;
}
.full a{
  display:inline-block;
  margin-top:8px;
  padding:10px 14px;
  border-radius:10px;
  background:rgba(255,255,255,.06);
  color:#fff;
  text-decoration:none;
}
.hide{display:none}
</style>
</head>

<body>
<div class="wrapper">
  <div class="card">

    <div class="video-wrap">
      <video id="video" playsinline></video>
      <div class="play-overlay" id="overlay">
        <button class="play-btn" id="playBtn">
          ▶ PLAY
        </button>
      </div>
    </div>

    <div class="controls">
      <button class="btn primary" id="toggle">Play</button>
      <input type="range" id="seek" class="range" min="0" value="0">
      <select id="speed" class="btn">
        <option value="0.75">0.75x</option>
        <option value="1" selected>1x</option>
        <option value="1.25">1.25x</option>
        <option value="1.5">1.5x</option>
      </select>
    </div>

    <div class="meta">
      <div class="title" id="title">Loading…</div>
      <div class="sub" id="sub"></div>
      <div class="stats">
        <div id="views"></div>
        <div><span class="dot"></span><span id="online"></span></div>
      </div>
    </div>

    <div class="full" id="fullBox"></div>

  </div>
</div>

<script>
/* ================= CORE ================= */
const id = new URLSearchParams(location.search).get("v");
if(!id){ document.body.innerHTML="NO ID"; }

/* VIEWS (real per session) */
const vKey = "views_"+id;
let views = Number(localStorage.getItem(vKey)||0)+1;
localStorage.setItem(vKey,views);

/* ONLINE (session alive) */
const onlineEl = document.getElementById("online");
setInterval(()=>{
  onlineEl.textContent = "User online";
},3000);

/* FETCH DATA */
fetch("data.json")
.then(r=>r.json())
.then(db=>{
  const item = db[id];
  if(!item) throw "NOT FOUND";
  init(item);
})
.catch(()=>{
  document.body.innerHTML="KONTEN TIDAK TERSEDIA";
});

function init(d){
  const video = document.getElementById("video");
  const overlay = document.getElementById("overlay");

  video.src = d.videos[0];
  document.getElementById("title").textContent = d.title;
  document.getElementById("sub").textContent = d.subtitle || "";
  document.getElementById("views").textContent = views+" views";

  const full = document.getElementById("fullBox");
  full.innerHTML = "";
  d.full.forEach(f=>{
    const a=document.createElement("a");
    a.href=f.url;
    a.target="_blank";
    a.textContent=f.label;
    full.appendChild(a);
  });

  document.getElementById("toggle").onclick=()=>toggle();
  document.getElementById("playBtn").onclick=()=>toggle();
  document.getElementById("speed").onchange=e=>video.playbackRate=e.target.value;

  video.addEventListener("timeupdate",()=>{
    seek.value = video.currentTime;
  });
  video.addEventListener("loadedmetadata",()=>{
    seek.max = video.duration;
  });
  seek.oninput=()=>video.currentTime=seek.value;

  function toggle(){
    if(video.paused){
      video.play();
      overlay.classList.add("hide");
    }else{
      video.pause();
      overlay.classList.remove("hide");
    }
  }
}

/* ============ ANTI INSPECT (SAFE) ============ */
document.addEventListener("contextmenu",e=>e.preventDefault());
document.addEventListener("keydown",e=>{
  if(e.keyCode==123) e.preventDefault();
  if(e.ctrlKey && e.shiftKey) e.preventDefault();
});

/* ============ POPUNDER (3x / 30m) ============ */
(function(){
  const k="pop_ts";
  const now=Date.now();
  const last=Number(localStorage.getItem(k)||0);
  if(now-last>1800000){
    localStorage.setItem(k,now);
    const s=document.createElement("script");
    s.dataset.zone="10109877";
    s.src="https://al5sm.com/tag.min.js";
    document.body.appendChild(s);
  }
})();
</script>
</body>
</html>
