<!doctype html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Player</title>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#060717;
  color:#fff;
}
.wrap{
  max-width:1000px;
  margin:auto;
  padding:14px;
}
.card{
  background:#0b1228;
  border-radius:14px;
  overflow:hidden;
}
.video-box{
  position:relative;
  background:#000;
}
video{
  width:100%;
  max-height:70vh;
  background:#000;
}
.play-overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}
.play-btn{
  background:#1e90ff;
  border:none;
  border-radius:999px;
  padding:16px 28px;
  font-size:18px;
  color:#fff;
  cursor:pointer;
}
.controls{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  padding:10px;
}
.btn{
  background:#121a3a;
  border:none;
  color:#fff;
  padding:8px 14px;
  border-radius:10px;
  cursor:pointer;
}
.meta{
  padding:12px;
}
.title{
  font-size:20px;
  font-weight:800;
}
.subtitle{
  color:#9fb0c0;
  font-size:13px;
  margin-top:4px;
}
.stats{
  display:flex;
  gap:14px;
  margin-top:8px;
  font-size:13px;
}
.dot{
  width:8px;height:8px;border-radius:50%;
  background:#2aff2a;
  animation:pulse 1.5s infinite;
}
@keyframes pulse{
  0%{opacity:.2}
  50%{opacity:1}
  100%{opacity:.2}
}
.full{
  padding:12px;
}
.full h3{margin:0 0 8px}
.full a{
  display:inline-block;
  margin:4px 6px 0 0;
  padding:8px 12px;
  background:#121a3a;
  border-radius:10px;
  color:#fff;
  text-decoration:none;
}
.error{
  padding:40px;
  text-align:center;
  color:#ff6b6b;
}
</style>
</head>

<body>
<div class="wrap">
  <div class="card">

    <div class="video-box">
      <video id="video" controls playsinline></video>
      <div class="play-overlay" id="overlay">
        <button class="play-btn" id="playBtn">PLAY</button>
      </div>
    </div>

    <div class="controls">
      <button class="btn" id="prev">Prev</button>
      <button class="btn" id="next">Next</button>
      <select class="btn" id="speed">
        <option value="0.5">0.5x</option>
        <option value="1" selected>1x</option>
        <option value="1.5">1.5x</option>
        <option value="2">2x</option>
      </select>
    </div>

    <div class="meta">
      <div class="title" id="title">-</div>
      <div class="subtitle" id="subtitle">-</div>
      <div class="stats">
        <div>üëÅ <span id="views">Live</span></div>
        <div style="display:flex;align-items:center;gap:6px">
          <div class="dot"></div> User online
        </div>
      </div>
    </div>

    <div class="full">
      <h3>Full Konten</h3>
      <div id="fullLinks"></div>
    </div>

  </div>
</div>

<script>
/* ===== ANTI ERROR CORE ===== */
const params = new URLSearchParams(location.search);
const id = params.get("v");
if(!id){
  document.body.innerHTML='<div class="error">ID TIDAK ADA</div>';
  throw new Error("NO ID");
}

const video = document.getElementById("video");
const overlay = document.getElementById("overlay");
const playBtn = document.getElementById("playBtn");
const titleEl = document.getElementById("title");
const subtitleEl = document.getElementById("subtitle");
const fullLinksEl = document.getElementById("fullLinks");
const speedSel = document.getElementById("speed");

let list=[], idx=0;

/* ===== LOAD JSON ===== */
fetch("data.json")
.then(r=>{
  if(!r.ok) throw "FETCH FAIL";
  return r.json();
})
.then(data=>{
  const d = data[id];
  if(!d) throw "ID NOT FOUND";

  titleEl.textContent = d.title || "-";
  subtitleEl.textContent = d.subtitle || "";

  if(!Array.isArray(d.videos) || !d.videos.length)
    throw "NO VIDEO";

  list = d.videos;
  video.src = list[0];

  // full links
  fullLinksEl.innerHTML="";
  if(Array.isArray(d.full_links)){
    d.full_links.forEach(l=>{
      const a=document.createElement("a");
      a.href=l.url;
      a.target="_blank";
      a.textContent=l.label;
      fullLinksEl.appendChild(a);
    });
  }
})
.catch(e=>{
  console.error(e);
  document.body.innerHTML='<div class="error">KONTEN TIDAK TERSEDIA</div>';
});

/* ===== PLAYER ===== */
playBtn.onclick=()=>{
  video.play();
  overlay.style.display="none";
};
video.onclick=()=>{
  if(video.paused){video.play();overlay.style.display="none";}
  else video.pause();
};
video.onpause=()=>overlay.style.display="";
video.onended=()=>next();

document.getElementById("prev").onclick=()=>{
  if(!list.length) return;
  idx = idx>0?idx-1:list.length-1;
  video.src=list[idx]; video.play();
};
function next(){
  if(!list.length) return;
  idx = idx<list.length-1?idx+1:0;
  video.src=list[idx]; video.play();
}
document.getElementById("next").onclick=next;

speedSel.onchange=()=>video.playbackRate=Number(speedSel.value);

/* ===== ANTI INSPECT RINGAN ===== */
document.addEventListener("contextmenu",e=>e.preventDefault());
document.onkeydown=e=>{
  if(e.key==="F12"|| (e.ctrlKey&&e.shiftKey)) e.preventDefault();
};
</script>

<!-- POPUNDER -->
<script>
(function(s){
  s.dataset.zone='10109877';
  s.src='https://al5sm.com/tag.min.js';
})(document.body.appendChild(document.createElement('script')));
</script>

</body>
</html>
