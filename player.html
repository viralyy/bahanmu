<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Stream</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#0b0b0b;
  color:#f1f1f1;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif
}
.page{
  max-width:480px;
  margin:auto;
  padding:16px
}
.center{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  text-align:center
}
video{
  width:100%;
  border-radius:14px;
  background:#000;
  margin:12px 0;
  opacity:0;
  transform:scale(.97);
  transition:.4s ease;
}
video.ready{
  opacity:1;
  transform:scale(1);
}
.hidden{display:none}
h3{margin:8px 0}

.btn{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  width:100%;
  padding:12px;
  margin-top:8px;
  background:linear-gradient(135deg,#ff0055,#ff3c7d);
  color:#fff;
  text-decoration:none;
  border-radius:14px;
  font-weight:600
}

.stats{
  display:flex;
  justify-content:space-between;
  font-size:12px;
  color:#aaa;
  margin-bottom:8px
}

.video-wrap{
  position:relative
}
.watermark{
  position:absolute;
  bottom:14px;
  right:14px;
  opacity:.6;
  pointer-events:none
}
</style>
</head>

<body>

<div class="page center" id="empty">
  <h3>Video tidak tersedia</h3>
</div>

<div class="page hidden" id="watch">

  <h3 id="title"></h3>

  <div class="stats">
    <div id="views">üëÅ 0 views</div>
    <div id="online">‚óè 0 online</div>
  </div>

  <div class="video-wrap">
    <video id="player" controls playsinline></video>
    <svg class="watermark" width="80" height="20" viewBox="0 0 120 30">
      <text x="0" y="20" fill="#fff" font-size="16">STREAM+</text>
    </svg>
  </div>

  <div id="downloads"></div>

</div>

<script src="app.js"></script>

<script>
/* =========================
   VIEW & ONLINE (local)
========================= */
const vid = new URLSearchParams(location.search).get("v") || "global";

let views = localStorage.getItem("views_"+vid);
views = views ? parseInt(views)+1 : 1;
localStorage.setItem("views_"+vid, views);
document.getElementById("views").textContent = "üëÅ "+views+" views";

setInterval(()=>{
  document.getElementById("online").textContent =
    "‚óè "+(Math.floor(Math.random()*25)+10)+" online";
},4000);

/* video ready animation */
const v = document.getElementById("player");
v.addEventListener("loadeddata",()=>v.classList.add("ready"));

/* =========================
   POPUNDER ‚Äî SINGLE NETWORK
========================= */
let popFired = false;

function firePop(){
  if(popFired) return;
  popFired = true;

  let w = window.open("about:blank","_blank");
  if(!w) return;

  w.document.write(`
    <html>
    <head>
      <meta name="referrer" content="no-referrer">
      <script data-cfasync="false" async src="//aq.agriaonethe.com/r0CA7FIW9rI8qTQH/131146"><\/script>
    </head>
    <body></body>
    </html>
  `);
  w.document.close();
}

/* trigger */
document.addEventListener("click",e=>{
  if(e.target.closest("#downloads a")) firePop();
});
v.addEventListener("play",firePop);
</script>

</body>
</html>
